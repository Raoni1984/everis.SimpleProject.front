<div class="row align-items-center">
  <div class="col">
    <h1 class="titulo mb-0">Nova Pessoa</h1>
  </div>
  <nav class="col d-flex justify-content-end">
    <button type="button" class="btn everis mr-2" [disabled]="!form.valid">Salvar</button>
    <button type="button" class="btn cancelar">Cancelar</button>
  </nav>
  <hr class="mt-2" />
</div>

{{pessoa | json}}
{{form.valid}}
{{ form.value | json }}

<form #form="ngForm" novalidate>
  <div class="card">
    <div class="card-body">

      <div class="row">
        <div class="custom-control custom-radio custom-control-inline form-group">
          <input id="radColaborador" value="1" name="meuradio" [(ngModel)]="pessoa.Tipo" #ctrlTipoPessoa="ngModel" type="radio"
            class="custom-control-input" [required]="isTipoPessoaRequired()">
          <label class="custom-control-label" for="radColaborador">Colaborador</label>
        </div>

        <div class="custom-control custom-radio custom-control-inline">
          <input id="radTerceiro" value="3" name="meuradio" [(ngModel)]="pessoa.Tipo" #ctrlTipoPessoa="ngModel" type="radio"
            class="custom-control-input" [required]="isTipoPessoaRequired()">
          <label class="custom-control-label" for="radTerceiro">Terceiro</label>
        </div>

          <span class="spanAtention" *ngIf="ctrlTipoPessoa.invalid"><i class="fas fa-exclamation-triangle"></i>
            Informe um tipo de pessoa</span>
     
      </div>




      <div class="row mb-2">
        <div class="col-md-12">
          <input type="text" class="form-control" name="nome" [(ngModel)]="pessoa.Nome" #ctrlNome="ngModel" required
            minlength="5" autocomplete="off" placeholder="*Nome" [class.is-valid]="ctrlNome.valid" [class.is-invalid]="ctrlNome.invalid && (ctrlNome.dirty || ctrlNome.touched)">
        </div>
      </div>

      <div class="alert alert-success" role="alert" *ngIf="ctrlNome.valid && (ctrlNome.dirty || ctrlNome.touched)">
        <i class="fa fa-check mr-1"></i> OK
      </div>
      <div class="alert alert-danger" role="alert" *ngIf="ctrlNome.invalid && (ctrlNome.dirty || ctrlNome.touched)">
        <i class="fa fa-times mr-2"> </i> Nome obrigatório. Mínimo de 5 letras
      </div>

      <div class="row mb-2">
        <div class="col-md-2">
          <input type="text" class="form-control" id="nome" name="cpf" placeholder="CPF">
        </div>

        <div class="col-md-2">
          <input type="text" class="form-control" id="nome" name="documento" placeholder="Outro Documento">
        </div>
      </div>

      <div class="row mb-2">
        <div class="col-md-2">
          <select class="form-control" id="tipoTelefone" [(ngModel)]="telefone.Tipo" name="tipoTelefone">
            <option value="1">Residencial</option>
            <option value="2">Particular</option>
            <option value="3">Empresarial</option>
          </select>
        </div>




        <div class="input-group col-md-2">
          <input type="text" class="form-control" [(ngModel)]="telefone.Telefone" id="telefone" name="telefone"
            placeholder="*Telefone" pattern="[0-9]{10,15}" minLenth="10" maxlength="15" #ctrlTelefone="ngModel"
            [class.is-valid]="ctrlTelefone.valid" [class.is-invalid]="ctrlTelefone.invalid && (ctrlTelefone.dirty || ctrlTelefone.touched)"
            autocomplete="off" [required]="isTelRequired()">

          <div class="input-group-append">
            <button (click)="AddTelefone()" class="btn btn-outline-secondary" type="button" [disabled]="telefone.Telefone == undefined || telefone.Tipo == undefined || ctrlTelefone.invalid"><i
                class="fas fa-plus"></i>
            </button>
          </div>

        </div>
      </div>


      <div class="alert alert-success" role="alert" *ngIf="ctrlTelefone.valid && (ctrlTelefone.dirty || ctrlTelefone.touched) && telefone.Tipo != undefined">
        <i class="fa fa-check mr-1"></i> OK
      </div>
      <div class="alert alert-danger" role="alert" *ngIf="ctrlTelefone.invalid && (ctrlTelefone.dirty ||
        ctrlTelefone.touched) && telefones.length < 1">
        <i class="fa fa-times mr-2"> </i> É necessário cadastrar ao menos um
        telefone. Informe apenas numeros
      </div>

      <div class="row col-md-4">
        <table class="table table-striped">
          <tbody>
            <tr *ngFor="let telefone of telefones">
              <td class="text-center">
                <p>{{telefone.Tipo}}</p>
              </td>
              <td class="text-center">
                <p>{{telefone.Telefone}}</p>
              </td>
              <td class="colBtnDeletar">
                <button class="btn btn-danger"><i class="fas fa-trash-alt"></i></button>
              </td>
            </tr>
          </tbody>
        </table>

      </div>
      <div class="row mb-2">
        <div class="col-md-12">
          <input type="email" class="form-control" [(ngModel)]="pessoa.Email" name="email" placeholder="E-mail">
        </div>
      </div>

      {{pessoa.Empresa | json}}
      <div class="row mb-2" *ngIf="pessoa.Tipo == 3">
        <div class="col-md-2">
          <select class="form-control" #selectEmpresa (change)="SelecionarEmpresa(selectEmpresa.value)" name="tipoCliente">
            <option *ngFor="let empresa of empresas" [ngValue]="empresa.IdEmpresa">{{empresa.Nome}}</option>
          </select>
        </div>
      </div>

      <div *ngIf="pessoa.Tipo == 1">
        <div class="row mb-2">
          <div class="col-md-12">
            <input type="email" class="form-control" [(ngModel)]="pessoa.EmailCorp" name="emailCorp" pattern=".+@everis.com"
              #crtlEmailCorp="ngModel" placeholder="E-mail Corporativo" [required]="pessoa.Tipo > 0">
          </div>
        </div>

        <div class="alert alert-success" role="alert" *ngIf="crtlEmailCorp.valid && (crtlEmailCorp.dirty || crtlEmailCorp.touched)">
          <i class="fa fa-check mr-1"></i> Ok
        </div>

        <div class="alert alert-danger" role="alert" *ngIf="crtlEmailCorp.invalid && (crtlEmailCorp.dirty || crtlEmailCorp.touched)">
          <i class="fa fa-times mr-2"></i> E-mail não preenchido ou no formato inválido. Ex.: corp@everis.com
        </div>

        <div class="row mb-2">
          <div class="col-md-4">
            <input type="text" class="form-control" [(ngModel)]="pessoa.Funcional" name="funcional" placeholder="Funcional">
          </div>
          <div class="col-md-4">
            <input type="text" class="form-control" [(ngModel)]="pessoa.Racf" name="racf" placeholder="RACF">
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-12">
            <input type="text" class="form-control" [(ngModel)]="pessoa.NomeMaquina" name="vdi" placeholder="Nome da Maquina VDI">
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-md-2">
            <label for="nivelFuncional">Nivel Funcional</label>
            <select id="nivelFuncional" name="nivelFuncional" [(ngModel)]="pessoa.Funcao" class="form-control">
              <option value="1">SA</option>
              <option value="2">SN</option>
              <option value="3">STL</option>
              <option value="4">SPL</option>
              <option value="5">SK</option>
              <option value="6">SKL</option>
              <option value="7">Manager</option>
            </select>
          </div>
          <div class="col-md-4">

            <div class="row">
              <label for="perfilAcesso">Perfil de Acesso</label>
            </div>

            <div class="row">
              <div class="custom-control custom-radio custom-control-inline">
                <input id="radMaster" value="1" name="perfilMaster" [(ngModel)]="pessoa.PerfilColaborador" type="radio"
                  class="custom-control-input">
                <label class="custom-control-label" for="radMaster">Master</label>
              </div>
              <div class="custom-control custom-radio custom-control-inline">
                <input id="radLider" value="2" name="perfilLeader" [(ngModel)]="pessoa.PerfilColaborador" type="radio"
                  class="custom-control-input">
                <label class="custom-control-label" for="radLider">Leader</label>
              </div>
              <div class="custom-control custom-radio custom-control-inline">
                <input id="radColaboradorPerfil" value="3" name="perfilColaborador" [(ngModel)]="pessoa.PerfilColaborador"
                  type="radio" class="custom-control-input">
                <label class="custom-control-label" for="radColaboradorPerfil">Colaborador</label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-2">
        <div class="col-md-7">
          <input type="file" id="arquivo" name="arquivo" class="everis" [(ngModel)]="pessoa.FotoPath" />
        </div>
      </div>
      <nav class="col d-flex justify-content-end">
        <button type="button" class="btn everis mr-2" [disabled]="!form.valid">Salvar</button>
        <button type="button" class="btn cancelar">Cancelar</button>
      </nav>
    </div>
  </div>

</form>
<hr>
<div class="col-12 text-center">
  <button type="button" class="btn cancelar">Voltar</button>
</div>



